📤 设置部署到区块链上
-----------------------------------------

继续并关闭你的本地区块链网络运行的终端，也就是你运行`npx hardhat node`的地方。我们不再需要它了；）。我主要是想告诉你在本地的部署是如何进行的。

现在我们要做的是真正的交易，部署到实际的区块链上。

继续吧，在 Alchemy [这里](https://alchemy.com/?r=b93d1f12b8828a57)创建一个账户。

很抱歉让你建立这么多账户，但是，这个生态系统很复杂，我们想利用现有的强大工具。Alchemy所做的是为我们提供了一个简单的方法来部署到真正的以太坊区块链上。

💳 交易
---------------

因此，当我们想在以太坊区块链上执行一个动作时，我们称之为*交易*。例如，向某人发送Ethereum就是一个交易。做一些更新我们合约中的变量的事情，也被认为是一个交易。

因此，当我们调用`wave`，并且它做了`totalWaves += 1`，这就是一个交易！**部署智能合约也是一个交易。 **部署一个智能合约也是一个交易。

记住，区块链没有主人。它只是世界上由**人运行的一堆计算机，它们拥有区块链的副本。

当我们部署我们的合约时，我们需要告诉**所有这些**矿工，"嘿，这是一个新的智能合约，请把我的智能合约添加到区块链上，然后把它也告诉其他人"。

这就是 Alchemy 炼金术的由来。

炼金术本质上是帮助我们广播合约创建交易，以便它能尽快被矿工捡到。一旦交易被挖掘出来，它就会作为合法交易被广播到区块链上。从那里开始，每个人都会更新他们的区块链副本。

这很复杂。而且，如果你不完全理解它，也不用担心。当你写更多的代码并实际构建这个应用程序时，它自然会变得更有意义。 

所以，在Alchemy先创建一个账户吧 [这里](https://alchemy.com/?r=b93d1f12b8828a57)。

请看下面的视频，看看如何为测试网获得你的API密钥!
[Loom](https://www.loom.com/share/21aa1d64ea634c0c9da8fc5faaf24283)

🕸️ 测试网
------------

直到最后，我们才会部署到 "以太坊主网"。为什么？因为它需要花费真金白银，而且不值得去搞破坏 我们将从 "testnet "开始，它是 "mainnet "的一个克隆，但它使用的是假美元，所以我们可以尽情地测试东西。但是，重要的是要知道，测试网是由实际的矿工运行的，并模仿现实世界的场景。

这很了不起，因为我们可以在一个真实世界的场景中测试我们的应用程序，我们确实需要要这样做。

1\. 广播我们的交易信息

2\. 等待它被真正的矿工捡到

3\. 等到它被开采出来

4\. 等待它被广播回区块链，告诉所有其他矿工更新他们的副本。

因此，你将在接下来的几节课内完成这一切 :)。

🤑 获得一些假币 $
------------------------

现在有几个测试网，我们将使用的测试网叫做 "Rinkeby"，由以太坊基金会管理。

为了部署到Rinkeby，我们需要假的Ether。为什么？因为如果你要部署到真正的以太坊主网，你会使用真钱！所以，测试网复制了主网的工作方式，唯一的区别是不涉及真钱。

为了获得假ETH，我们必须向网络索取一些。**这种假ETH只在这个特定的测试网络上工作。**你可以通过水龙头为Rinkeby获得一些假ETH。在使用龙头之前，请确保你的MetaMask钱包被设置为 "Rinkeby测试网络"。

对于MyCrypto，你需要连接你的钱包，建立一个账户，然后再次点击同一个链接来请求资金。对于官方的Rinkeby水龙头，如果它列出了0个队列，就不值得花时间去发推特/Facebook公开帖子。

| Name             | Link                                  | Amount          | Time         |
| ---------------- | ------------------------------------- | --------------- | ------------ |
| MyCrypto         | https://app.mycrypto.com/faucet       | 0.01            | None         |
| Buildspace       | https://buildspace-faucet.vercel.app/ | 0.025           | 1d           |
| Ethily           | https://ethily.io/rinkeby-faucet/     | 0.2             | 1w           |
| Official Rinkeby | https://faucet.rinkeby.io/            | 3 / 7.5 / 18.75 | 8h / 1d / 3d |


📈 部署到Rinkeby测试网
---------------------------------

我们需要改变我们的`hardhat.config.js`文件。你可以在你的智能合约项目的根目录下找到它。

```javascript
require('@nomiclabs/hardhat-waffle');

module.exports = {
  solidity: '0.8.0',
  networks: {
    rinkeby: {
      url: 'YOUR_ALCHEMY_API_URL',
      accounts: ['YOUR_PRIVATE_RINKEBY_ACCOUNT_KEY'],
    },
  },
};
```

**注意：不要把这个文件提交给GITHUB，它有你的私钥，你会被黑客攻击和抢劫的！这个私钥和你的主网私钥是一样的。**我们稍后会讨论`.env`变量以及如何保持这些东西的机密。

你可以从Alchemy仪表板上获得你的API URL并粘贴进去。然后，你将需要你的**私人**rinkeby密钥（不是你的公共地址！），你可以从metamask中复制并粘贴到那里。

**注意：访问你的私钥可以通过打开MetaMask，将网络改为 "Rinkeby测试网络"，然后点击三个点，选择 "账户细节">"导出私钥 "**。

为什么你需要使用你的私钥？因为为了执行像部署合同这样的交易，你需要 "登录 "到区块链上。所以你的用户名是你的公共地址，你的密码是你的私钥。这有点像登录AWS或GCP进行部署。

一旦你设置好了你的配置，我们就可以用我们之前写的部署脚本进行部署了。

在`my-wave-portal`的根目录下运行这个命令。注意我们所做的只是把它从`localhost`改为`rinkeby`。

```bash
npx hardhat run scripts/deploy.js --network rinkeby
```

❤️ 部署！
-------------

这是我的输出

```bash
Deploying contracts with the account: 0xF79A3bb8d5b93686c4068E2A97eAeC5fE4843E7D
Account balance: 3198297774605223721
WavePortal address: 0xd5f08a0ae197482FA808cE84E00E97d940dBD26E
```

复制最后一行中部署合同的地址，并将其保存在某个地方。不要丢失它! 你以后会需要它来做前端:)，你的和我的是不一样的。

**你刚刚部署了你的合同，WOOOOOOO。**

你实际上可以把这个地址，然后粘贴到Etherscan[这里](https://rinkeby.etherscan.io/)。Etherscan是一个向我们展示区块链状态的地方，帮助我们看到我们的交易处于什么位置。你应该在这里看到你的交易:)。它可能需要一分钟才能显示出来!

举例， [这里](https://rinkeby.etherscan.io/address/0xd5f08a0ae197482FA808cE84E00E97d940dBD26E)是我的！

🚨 在你点击 "下一课 "之前
---------------------------------

**你刚刚做了很多。**

你完全应该**发推特**，说你刚刚编写并部署了你的第一个智能合约，并@_buildspace。如果你愿意，请附上以太坊页面的截图，显示你的合约已经在区块链上了。

你能走到这一步，是件大事。你创造并部署了一些东西到实际的区块链上。**我勒个去**。**我为你感到骄傲**。

你现在是一个真正在 "做 "的人，而大多数其他人只是在 "谈论 "这件事。

你离掌握web3的艺术又近了一步。

继续努力 :).

--

*感谢那些已经在推特上介绍我们的人，你们都是传奇人物。 <3.*

![](https://i.imgur.com/1lMrpFh.png)

![](https://i.imgur.com/W9Xcn4A.png)

![](https://i.imgur.com/k3lJlls.png)
